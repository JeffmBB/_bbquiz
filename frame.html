
<html>
<head>
<!-- 
  https://jeffmbb.github.io/bbquiz/frame.html 
  https://raw.githubusercontent.com/jeffmbb/bbquiz/master/frame.html
-->
<style>
  #answerdiv {display:inline;}
  #clickdiv {display:inline;}
  p,#answerdiv,#getanother,#clickdiv,div {font-family: Arial, Helvetica, sans-serif;font-size:12px;}
  #quizgraphic {width:140px; padding:1px 1px 0px 1px;}
  #outer  {width:144px; border:#e6e6e6 3px solid; background-color:#e6f2ff; padding:2px 2px 2px 2px; }
  .answerp { cursor:pointer; }
  #a1:hover,#a2:hover, #a3:hover,#a4:hover { font-weight:bold;} 
  .clickish {text-decoration:underline; cursor:pointer;}
</style>
</head>
<body>
<div id="outer">
  <center><img id="quizgraphic" src="quizgraphic.jpg" alt="Bridgetown Invitational Fun Quiz"></center>
    <p><strong>Question:</strong> <span id="question">SORRY, QUIZ IS OFFLINE</p>
    <p class="answerp">
      <span id="a1"></span><BR>
      <span id="a2"></span><BR>
      <span id="a3"></span><BR>
      <span id="a4"></span>
    </p>
    <p>
      <div id="clickdiv">Click the correct&nbsp;answer.</span></div>
      <div id="answerdiv"><strong><span id="rightwrong"></span></strong>  <span id="thisanswer">SOMETHING BROKE</span><BR><BR>
        <span id="getanother" class="clickish">Try another question!</span>
      </div>
    </p>
</div>

<!-- ==================== -->
<!-- p id="testr">DELETE THIS</p -->
<!------------------------>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript">

jQuery.getJSON('frame.json', function(data) {
  var quiz = data.bbquiz;
  var quizl = quiz.length; /* e.g. 5 records but last is Index 4*/
  var qnum;
  var counter=0;
  //===================================
  //counter=18;  //testing
  
  var sortr=[];

  function shuffleArray(array){
    for (let i=array.length-1;i>0;i--){
      const j=Math.floor(Math.random()*(i+1));
      [array[i],array[j]]=[array[j],array[i]];
    }
  }
  for(var x=0;x<=quizl;x++){
    sortr[x]=x;
  }
  shuffleArray(sortr); sortr = jQuery.grep(sortr,n=>n==0||n);

function populate(xx){
  jQuery("#question").html(quiz[xx].question);
  jQuery("#a1").html("A. "+quiz[xx].a1);
  jQuery("#a2").html("B. "+quiz[xx].a2);
  jQuery("#a3").html("C. "+quiz[xx].a3);
  jQuery("#a4").html("D. "+quiz[xx].a4);
  jQuery("#thisanswer").html(quiz[xx].answer);
}

function resetfonts(){
  jQuery("#a1,#a2,#a3,#a4,#rightwrong").css({"font-weight":"normal","color":"#000"});
  jQuery("#a1,#a2,#a3,#a4").hover(
    function(){jQuery(this).css("font-weight","bold");
  },
    function(){ jQuery(this).css("font-weight","normal");
  });
}

function init(){
  if(counter >= quizl){counter=0;}
  document.getElementById("answerdiv").style.display="none";
  document.getElementById("clickdiv").style.display="inline";
  resetfonts();
  qnum = sortr[counter];
  populate(qnum);
  //================================
  //var ddd = counter +"; "+ sortr[counter] +"; "+ quiz[sortr[counter]].a1 +"; "+ sortr +"; "+quizl;

  counter++;
  //================================
  //jQuery("#testr").html( ddd + ";<BR>" + counter +" after the ++" );
}  

init();

jQuery("#a1,#a2,#a3,#a4").click( function(){
  document.getElementById("rightwrong").innerHTML="";
  var idnum=this.id.charAt(1);
  resetfonts();
  setTimeout( function(){
    var rw="Wrong!"; 
    if(idnum==2){rw="Sorry!"}
    if(idnum==3){rw="Incorrect!"}
    if(idnum==4){rw="Nope!"}
    if(quiz[qnum].correct==idnum){
        rw="Right!";
        jQuery("#a"+idnum+",#rightwrong").css("color","#29a329");
      }else{
        jQuery("#a"+idnum+",#rightwrong").css("color","#cc0000");
    };
    jQuery("#a"+idnum+",#rightwrong").css("font-weight","bold");  
    document.getElementById("rightwrong").innerHTML=rw;
    document.getElementById("clickdiv").style.display="none";
    document.getElementById("answerdiv").style.display="inline";
  },500);
});

jQuery("#getanother").click( function(){ init(); });  

});//END OF MAIN JQUERY LOOP
</script>
 </body>
</html>
